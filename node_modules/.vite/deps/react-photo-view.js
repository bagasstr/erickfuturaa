import {
  require_react_dom
} from "./chunk-CIQVVTPY.js";
import {
  require_react
} from "./chunk-ZOIWZPCO.js";
import {
  __toESM
} from "./chunk-DFKQJ226.js";

// node_modules/react-photo-view/dist/react-photo-view.module.js
var import_react = __toESM(require_react());
var import_react_dom = __toESM(require_react_dom());
function f() {
  return f = Object.assign || function(e2) {
    for (var n2 = 1; n2 < arguments.length; n2++) {
      var t2 = arguments[n2];
      for (var r2 in t2)
        Object.prototype.hasOwnProperty.call(t2, r2) && (e2[r2] = t2[r2]);
    }
    return e2;
  }, f.apply(this, arguments);
}
function h(e2, n2) {
  if (null == e2)
    return {};
  var t2, r2, i2 = {}, o2 = Object.keys(e2);
  for (r2 = 0; r2 < o2.length; r2++)
    n2.indexOf(t2 = o2[r2]) >= 0 || (i2[t2] = e2[t2]);
  return i2;
}
function m(e2) {
  var t2 = (0, import_react.useRef)({ fn: e2, curr: void 0 }).current;
  if (t2.fn = e2, !t2.curr) {
    var r2 = /* @__PURE__ */ Object.create(null);
    Object.keys(e2).forEach(function(e3) {
      r2[e3] = function() {
        var n2;
        return (n2 = t2.fn[e3]).call.apply(n2, [t2.fn].concat([].slice.call(arguments)));
      };
    }), t2.curr = r2;
  }
  return t2.curr;
}
function g(e2) {
  return (0, import_react.useReducer)(function(e3, n2) {
    return f({}, e3, "function" == typeof n2 ? n2(e3) : n2);
  }, e2);
}
var p = (0, import_react.createContext)(void 0);
var w = "undefined" != typeof window && "ontouchstart" in window;
var y = function(e2, n2, t2) {
  return Math.max(Math.min(e2, t2), n2);
};
var x = function(e2, n2, t2) {
  return void 0 === n2 && (n2 = 0), void 0 === t2 && (t2 = 0), y(e2, 1 * (1 - t2), Math.max(6, n2) * (1 + t2));
};
var C = "undefined" == typeof window || /ServerSideRendering/.test(navigator && navigator.userAgent) ? import_react.useEffect : import_react.useLayoutEffect;
function b(e2, t2, r2) {
  var o2 = (0, import_react.useRef)(t2);
  o2.current = t2, (0, import_react.useEffect)(function() {
    function n2(e3) {
      o2.current(e3);
    }
    return e2 && window.addEventListener(e2, n2, r2), function() {
      e2 && window.removeEventListener(e2, n2);
    };
  }, [e2]);
}
var E = ["container"];
function k(n2) {
  var t2 = n2.container, r2 = void 0 === t2 ? document.body : t2, i2 = h(n2, E);
  return (0, import_react_dom.createPortal)(import_react.default.createElement("div", f({}, i2)), r2);
}
function P(n2) {
  return import_react.default.createElement("svg", f({ width: "44", height: "44", viewBox: "0 0 768 768" }, n2), import_react.default.createElement("path", { d: "M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z" }));
}
function _(n2) {
  return import_react.default.createElement("svg", f({ width: "44", height: "44", viewBox: "0 0 768 768" }, n2), import_react.default.createElement("path", { d: "M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z" }));
}
function M(n2) {
  return import_react.default.createElement("svg", f({ width: "44", height: "44", viewBox: "0 0 768 768" }, n2), import_react.default.createElement("path", { d: "M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z" }));
}
function Y() {
  return (0, import_react.useEffect)(function() {
    var e2 = document.body.style, n2 = e2.overflow;
    return e2.overflow = "hidden", function() {
      e2.overflow = n2;
    };
  }, []), null;
}
function X(e2) {
  var n2 = e2.touches[0], t2 = n2.clientX, r2 = n2.clientY;
  if (e2.touches.length >= 2) {
    var i2 = e2.touches[1], o2 = i2.clientX, a2 = i2.clientY;
    return [(t2 + o2) / 2, (r2 + a2) / 2, Math.sqrt(Math.pow(o2 - t2, 2) + Math.pow(a2 - r2, 2))];
  }
  return [t2, r2, 0];
}
var N = function(e2, n2, t2, r2) {
  var i2 = t2 * n2, o2 = (i2 - r2) / 2, a2 = void 0, c2 = e2;
  return i2 <= r2 ? (a2 = 1, c2 = 0) : e2 > 0 && o2 - e2 <= 0 ? (a2 = 2, c2 = o2) : e2 < 0 && o2 + e2 <= 0 && (a2 = 3, c2 = -o2), [a2, c2];
};
function W(e2, n2, t2, r2, i2, o2, a2, c2, u2, l2) {
  void 0 === a2 && (a2 = innerWidth / 2), void 0 === c2 && (c2 = innerHeight / 2), void 0 === u2 && (u2 = 0), void 0 === l2 && (l2 = 0);
  var s2 = N(e2, o2, t2, innerWidth)[0], d2 = N(n2, o2, r2, innerHeight), v2 = innerWidth / 2, f2 = innerHeight / 2;
  return { x: a2 - o2 / i2 * (a2 - (v2 + e2)) - v2 + (r2 / t2 >= 3 && t2 * o2 === innerWidth ? 0 : s2 ? u2 / 2 : u2), y: c2 - o2 / i2 * (c2 - (f2 + n2)) - f2 + (d2[0] ? l2 / 2 : l2), lastCX: a2, lastCY: c2 };
}
function S(e2, n2, t2) {
  var r2 = e2 % 180 != 0;
  return r2 ? [t2, n2, r2] : [n2, t2, r2];
}
function T(e2, n2, t2) {
  var r2 = S(t2, innerWidth, innerHeight), i2 = r2[0], o2 = r2[1], a2 = 0, c2 = i2, u2 = o2, l2 = e2 / n2 * o2, s2 = n2 / e2 * i2;
  return e2 < i2 && n2 < o2 ? (c2 = e2, u2 = n2) : e2 < i2 && n2 >= o2 ? c2 = l2 : e2 >= i2 && n2 < o2 || e2 / n2 > i2 / o2 ? u2 = s2 : n2 / e2 >= 3 && !r2[2] ? a2 = ((u2 = s2) - o2) / 2 : c2 = l2, { width: c2, height: u2, x: 0, y: a2, pause: true };
}
function V(e2, t2) {
  var r2 = t2.leading, i2 = void 0 !== r2 && r2, o2 = t2.maxWait, a2 = t2.wait, u2 = void 0 === a2 ? o2 || 0 : a2, l2 = (0, import_react.useRef)(e2);
  l2.current = e2;
  var s2 = (0, import_react.useRef)(0), d2 = (0, import_react.useRef)(), v2 = function() {
    return d2.current && clearTimeout(d2.current);
  }, f2 = (0, import_react.useCallback)(function() {
    var e3 = [].slice.call(arguments), n2 = Date.now();
    function t3() {
      s2.current = n2, v2(), l2.current.apply(null, e3);
    }
    var r3 = s2.current, a3 = n2 - r3;
    if (0 === r3 && (i2 && t3(), s2.current = n2), void 0 !== o2) {
      if (a3 > o2)
        return void t3();
    } else
      a3 < u2 && (s2.current = n2);
    v2(), d2.current = setTimeout(function() {
      t3(), s2.current = 0;
    }, u2);
  }, [u2, o2, i2]);
  return f2.cancel = v2, f2;
}
var R = function(e2, n2, t2) {
  return I(e2, n2, t2, 100, function(e3) {
    return e3;
  }, function() {
    return I(n2, e2, t2);
  });
};
var A = function(e2) {
  return 1 - Math.pow(1 - e2, 4);
};
function I(e2, n2, t2, r2, i2, o2) {
  void 0 === r2 && (r2 = 400), void 0 === i2 && (i2 = A);
  var a2 = n2 - e2;
  if (0 !== a2) {
    var c2 = Date.now(), u2 = 0, l2 = function() {
      var n3 = Math.min(1, (Date.now() - c2) / r2);
      t2(e2 + i2(n3) * a2) && n3 < 1 ? s2() : (cancelAnimationFrame(u2), n3 >= 1 && o2 && o2());
    };
    s2();
  }
  function s2() {
    u2 = requestAnimationFrame(l2);
  }
}
var H = { T: 0, L: 0, W: 0, H: 0, FIT: void 0 };
var L = function() {
  var e2 = (0, import_react.useRef)(false);
  return (0, import_react.useEffect)(function() {
    return e2.current = true, function() {
      e2.current = false;
    };
  }, []), e2;
};
var F = ["className"];
function D(n2) {
  var t2 = n2.className, r2 = h(n2, F);
  return import_react.default.createElement("div", f({ className: "PhotoView__Spinner " + t2 }, r2), import_react.default.createElement("svg", { viewBox: "0 0 32 32", width: "36", height: "36", fill: "white" }, import_react.default.createElement("path", { opacity: ".25", d: "M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4" }), import_react.default.createElement("path", { d: "M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z" })));
}
var O = ["src", "loaded", "broken", "className", "onPhotoLoad", "loadingElement", "brokenElement"];
function B(n2) {
  var t2 = n2.src, r2 = n2.loaded, i2 = n2.broken, o2 = n2.className, a2 = n2.onPhotoLoad, c2 = n2.loadingElement, u2 = n2.brokenElement, l2 = h(n2, O), s2 = L();
  return t2 && !i2 ? import_react.default.createElement(import_react.default.Fragment, null, import_react.default.createElement("img", f({ className: "PhotoView__Photo" + (o2 ? " " + o2 : ""), src: t2, onLoad: function(e2) {
    var n3 = e2.target;
    s2.current && a2({ loaded: true, naturalWidth: n3.naturalWidth, naturalHeight: n3.naturalHeight });
  }, onError: function() {
    s2.current && a2({ broken: true });
  }, alt: "" }, l2)), !r2 && (import_react.default.createElement("span", { className: "PhotoView__icon" }, c2) || import_react.default.createElement(D, { className: "PhotoView__icon" }))) : u2 ? import_react.default.createElement("span", { className: "PhotoView__icon" }, "function" == typeof u2 ? u2({ src: t2 }) : u2) : null;
}
var z = { naturalWidth: void 0, naturalHeight: void 0, width: void 0, height: void 0, loaded: void 0, broken: false, x: 0, y: 0, touched: false, maskTouched: false, rotate: 0, scale: 1, CX: 0, CY: 0, lastX: 0, lastY: 0, lastCX: 0, lastCY: 0, lastScale: 1, touchTime: 0, touchLength: 0, pause: true, stopRaf: true, reach: void 0 };
function j(t2) {
  var r2 = t2.item, o2 = r2.src, a2 = r2.render, c2 = r2.width, l2 = void 0 === c2 ? 0 : c2, s2 = r2.height, d2 = void 0 === s2 ? 0 : s2, v2 = r2.originRef, h2 = t2.visible, p2 = t2.speed, y2 = t2.easing, E2 = t2.wrapClassName, k2 = t2.className, P2 = t2.style, _2 = t2.loadingElement, M2 = t2.brokenElement, Y2 = t2.onPhotoTap, A2 = t2.onMaskTap, F2 = t2.onReachMove, D2 = t2.onReachUp, O2 = t2.onPhotoResize, j2 = t2.isActive, q2 = t2.expose, K2 = g(z), U2 = K2[0], G2 = K2[1], J2 = (0, import_react.useRef)(0), Q2 = L(), Z = U2.naturalWidth, $ = void 0 === Z ? l2 : Z, ee = U2.naturalHeight, ne = void 0 === ee ? d2 : ee, te = U2.width, re = void 0 === te ? l2 : te, ie = U2.height, oe = void 0 === ie ? d2 : ie, ae = U2.loaded, ce = void 0 === ae ? !o2 : ae, ue = U2.broken, le = U2.x, se = U2.y, de = U2.touched, ve = U2.stopRaf, fe = U2.maskTouched, he = U2.rotate, me = U2.scale, ge = U2.CX, pe = U2.CY, we = U2.lastX, ye = U2.lastY, xe = U2.lastCX, Ce = U2.lastCY, be = U2.lastScale, Ee = U2.touchTime, ke = U2.touchLength, Pe = U2.pause, _e = U2.reach, Me = m({ onScale: function(e2) {
    return Ye(x(e2));
  }, onRotate: function(e2) {
    he !== e2 && (q2({ rotate: e2 }), G2(f({ rotate: e2 }, T($, ne, e2))));
  } });
  function Ye(e2, n2, t3) {
    me !== e2 && (q2({ scale: e2 }), G2(f({ scale: e2 }, W(le, se, re, oe, me, e2, n2, t3), e2 <= 1 && { x: 0, y: 0 })));
  }
  var Xe = V(function(e2, n2, t3) {
    if (void 0 === t3 && (t3 = 0), (de || fe) && j2) {
      var r3 = S(he, re, oe), i2 = r3[0], o3 = r3[1];
      if (0 === t3 && 0 === J2.current) {
        var a3 = Math.abs(e2 - ge) <= 20, c3 = Math.abs(n2 - pe) <= 20;
        if (a3 && c3)
          return void G2({ lastCX: e2, lastCY: n2 });
        J2.current = a3 ? n2 > pe ? 3 : 2 : 1;
      }
      var u2 = e2 - xe, l3 = n2 - Ce, s3 = void 0;
      if (0 === t3) {
        var d3 = N(u2 + we, me, i2, innerWidth)[0], v3 = N(l3 + ye, me, o3, innerHeight);
        s3 = function(e3, n3, t4, r4) {
          return n3 && 1 === e3 || "x" === r4 ? "x" : t4 && e3 > 1 || "y" === r4 ? "y" : void 0;
        }(J2.current, d3, v3[0], _e), void 0 !== s3 && F2(s3, e2, n2, me);
      }
      if ("x" === s3 || fe)
        return void G2({ reach: "x" });
      var h3 = x(me + (t3 - ke) / 100 / 2 * me, $ / re, 0.2);
      q2({ scale: h3 }), G2(f({ touchLength: t3, reach: s3, scale: h3 }, W(le, se, re, oe, me, h3, e2, n2, u2, l3)));
    }
  }, { maxWait: 8 });
  function Ne(e2) {
    return !ve && !de && (Q2.current && G2(f({}, e2, { pause: h2 })), Q2.current);
  }
  var We, Se, Te, Ve, Re, Ae, Ie, He, Le = (Re = function(e2) {
    return Ne({ x: e2 });
  }, Ae = function(e2) {
    return Ne({ y: e2 });
  }, Ie = function(e2) {
    return Q2.current && (q2({ scale: e2 }), G2({ scale: e2 })), !de && Q2.current;
  }, He = m({ X: function(e2) {
    return Re(e2);
  }, Y: function(e2) {
    return Ae(e2);
  }, S: function(e2) {
    return Ie(e2);
  } }), function(e2, n2, t3, r3, i2, o3, a3, c3, u2, l3, s3) {
    var d3 = S(l3, i2, o3), v3 = d3[0], f2 = d3[1], h3 = N(e2, c3, v3, innerWidth), m2 = h3[0], g2 = h3[1], p3 = N(n2, c3, f2, innerHeight), w2 = p3[0], y3 = p3[1], x2 = Date.now() - s3;
    if (x2 >= 200 || c3 != a3 || Math.abs(u2 - a3) > 1) {
      var C2 = W(e2, n2, i2, o3, a3, c3), b2 = C2.x, E3 = C2.y, k3 = m2 ? g2 : b2 !== e2 ? b2 : null, P3 = w2 ? y3 : E3 !== n2 ? E3 : null;
      return null !== k3 && I(e2, k3, He.X), null !== P3 && I(n2, P3, He.Y), void (c3 != a3 && I(a3, c3, He.S));
    }
    var _3 = (e2 - t3) / x2, M3 = (n2 - r3) / x2, Y3 = Math.sqrt(Math.pow(_3, 2) + Math.pow(M3, 2)), X2 = false, T2 = false;
    !function(e3, n3) {
      var t4 = e3, r4 = 0, i3 = void 0, o4 = 0, a4 = function(o5) {
        i3 || (i3 = o5);
        var a5 = o5 - i3, l4 = Math.sign(e3), s4 = -1e-3 * l4, d4 = Math.sign(-t4) * Math.pow(t4, 2) * 2e-4, v4 = t4 * a5 + (s4 + d4) * Math.pow(a5, 2) / 2;
        r4 += v4, i3 = o5, l4 * (t4 += (s4 + d4) * a5) <= 0 ? u3() : n3(r4) ? c4() : u3();
      };
      function c4() {
        o4 = requestAnimationFrame(a4);
      }
      function u3() {
        cancelAnimationFrame(o4);
      }
      c4();
    }(Y3, function(t4) {
      var r4 = e2 + t4 * (_3 / Y3), i3 = n2 + t4 * (M3 / Y3), o4 = N(r4, a3, v3, innerWidth), c4 = o4[0], u3 = o4[1], l4 = N(i3, a3, f2, innerHeight), s4 = l4[0], d4 = l4[1];
      if (c4 && !X2 && (X2 = true, m2 ? I(r4, u3, He.X) : R(u3, r4 + (r4 - u3), He.X)), s4 && !T2 && (T2 = true, w2 ? I(i3, d4, He.Y) : R(d4, i3 + (i3 - d4), He.Y)), X2 && T2)
        return false;
      var h4 = X2 || He.X(u3), g3 = T2 || He.Y(d4);
      return h4 && g3;
    });
  }), Fe = (We = Y2, Se = function(e2, n2) {
    _e || Ye(1 !== me ? 1 : Math.max(2, $ / re), e2, n2);
  }, Te = (0, import_react.useRef)(0), Ve = V(function() {
    Te.current = 0, We.apply(void 0, [].slice.call(arguments));
  }, { wait: 300 }), function() {
    var e2 = [].slice.call(arguments);
    Te.current += 1, Ve.apply(void 0, e2), Te.current >= 2 && (Ve.cancel(), Te.current = 0, Se.apply(void 0, e2));
  });
  function De(e2, n2) {
    if (J2.current = 0, (de || fe) && j2) {
      G2({ touched: false, maskTouched: false, pause: false, stopRaf: false, reach: void 0 });
      var t3 = x(me, $ / re);
      if (Le(le, se, we, ye, re, oe, me, t3, be, he, Ee), D2(e2, n2), ge === e2 && pe === n2) {
        if (de)
          return void Fe(e2, n2);
        fe && A2(e2, n2);
      }
    }
  }
  function Oe(e2, n2, t3) {
    void 0 === t3 && (t3 = 0), G2({ touched: true, CX: e2, CY: n2, lastCX: e2, lastCY: n2, lastX: le, lastY: se, lastScale: me, touchLength: t3, touchTime: Date.now() });
  }
  function Be(e2) {
    G2({ maskTouched: true, CX: e2.clientX, CY: e2.clientY, lastX: le, lastY: se });
  }
  b(w ? void 0 : "mousemove", function(e2) {
    e2.preventDefault(), Xe(e2.clientX, e2.clientY);
  }), b(w ? void 0 : "mouseup", function(e2) {
    De(e2.clientX, e2.clientY);
  }), b(w ? "touchmove" : void 0, function(e2) {
    e2.preventDefault();
    var n2 = X(e2);
    Xe.apply(void 0, n2);
  }, { passive: false }), b(w ? "touchend" : void 0, function(e2) {
    var n2 = e2.changedTouches[0];
    De(n2.clientX, n2.clientY);
  }, { passive: false }), b("resize", V(function() {
    ce && !de && (G2(T($, ne, he)), O2());
  }, { maxWait: 8 })), C(function() {
    j2 && q2(f({ scale: me, rotate: he }, Me));
  }, [j2]);
  var ze = function(e2, t3, r3, o3, a3, c3, l3, s3, d3, v3) {
    var f2 = function(e3, t4, r4, i2, o4) {
      var a4 = (0, import_react.useRef)(false), c4 = g({ lead: true, scale: r4 }), u2 = c4[0], l4 = u2.lead, s4 = u2.scale, d4 = c4[1], v4 = V(function(e4) {
        try {
          return o4(true), d4({ lead: false, scale: e4 }), Promise.resolve();
        } catch (e5) {
          return Promise.reject(e5);
        }
      }, { wait: i2 });
      return C(function() {
        a4.current ? (o4(false), d4({ lead: true }), v4(r4)) : a4.current = true;
      }, [r4]), l4 ? [e3 * s4, t4 * s4, r4 / s4] : [e3 * r4, t4 * r4, 1];
    }(c3, l3, s3, d3, v3), h3 = f2[0], p3 = f2[1], w2 = f2[2], y3 = function(e3, t4, r4, o4, a4) {
      var c4 = (0, import_react.useState)(H), l4 = c4[0], s4 = c4[1], d4 = (0, import_react.useState)(0), v4 = d4[0], f3 = d4[1], h4 = (0, import_react.useRef)(), g2 = m({ OK: function() {
        return e3 && f3(4);
      } });
      function p4(e4) {
        a4(false), f3(e4);
      }
      return (0, import_react.useEffect)(function() {
        if (h4.current || (h4.current = Date.now()), r4) {
          if (function(e4, n2) {
            var t5 = e4 && e4.current;
            if (t5 && 1 === t5.nodeType) {
              var r5 = t5.getBoundingClientRect();
              n2({ T: r5.top, L: r5.left, W: r5.width, H: r5.height, FIT: "IMG" === t5.tagName ? getComputedStyle(t5).objectFit : void 0 });
            }
          }(t4, s4), e3)
            return Date.now() - h4.current < 250 ? (f3(1), requestAnimationFrame(function() {
              f3(2), requestAnimationFrame(function() {
                return p4(3);
              });
            }), void setTimeout(g2.OK, o4)) : void f3(4);
          p4(5);
        }
      }, [e3, r4]), [v4, l4];
    }(e2, t3, r3, d3, v3), x2 = y3[0], b2 = y3[1], E3 = b2.W, k3 = b2.FIT, P3 = innerWidth / 2, _3 = innerHeight / 2, M3 = x2 < 3 || x2 > 4;
    return [M3 ? E3 ? b2.L : P3 : o3 + (P3 - c3 * s3 / 2), M3 ? E3 ? b2.T : _3 : a3 + (_3 - l3 * s3 / 2), h3, M3 && k3 ? h3 * (b2.H / E3) : p3, 0 === x2 ? w2 : M3 ? E3 / (c3 * s3) || 0.01 : w2, M3 ? k3 ? 1 : 0 : 1, x2, k3];
  }(h2, v2, ce, le, se, re, oe, me, p2, function(e2) {
    return G2({ pause: e2 });
  }), je = ze[4], qe = ze[6], Ke = "transform " + p2 + "ms " + y2, Ue = { className: k2, onMouseDown: w ? void 0 : function(e2) {
    e2.stopPropagation(), 0 === e2.button && Oe(e2.clientX, e2.clientY, 0);
  }, onTouchStart: w ? function(e2) {
    e2.stopPropagation(), Oe.apply(void 0, X(e2));
  } : void 0, onWheel: function(e2) {
    if (!_e) {
      var n2 = x(me - e2.deltaY / 100 / 2, $ / re);
      G2({ stopRaf: true }), Ye(n2, e2.clientX, e2.clientY);
    }
  }, style: { width: ze[2], height: ze[3], opacity: ze[5], objectFit: 4 === qe ? void 0 : ze[7], transform: he ? "rotate(" + he + "deg)" : void 0, transition: qe > 2 ? Ke + ", opacity " + p2 + "ms ease, height " + (qe < 4 ? p2 / 2 : qe > 4 ? p2 : 0) + "ms " + y2 : void 0 } };
  return import_react.default.createElement("div", { className: "PhotoView__PhotoWrap" + (E2 ? " " + E2 : ""), style: P2, onMouseDown: !w && j2 ? Be : void 0, onTouchStart: w && j2 ? function(e2) {
    return Be(e2.touches[0]);
  } : void 0 }, import_react.default.createElement("div", { className: "PhotoView__PhotoBox", style: { transform: "matrix(" + je + ", 0, 0, " + je + ", " + ze[0] + ", " + ze[1] + ")", transition: de || Pe ? void 0 : Ke, willChange: j2 ? "transform" : void 0 } }, o2 ? import_react.default.createElement(B, f({ src: o2, loaded: ce, broken: ue }, Ue, { onPhotoLoad: function(e2) {
    G2(f({}, e2, e2.loaded && T(e2.naturalWidth || 0, e2.naturalHeight || 0, he)));
  }, loadingElement: _2, brokenElement: M2 })) : a2 && a2({ attrs: Ue, scale: je, rotate: he })));
}
var q = { x: 0, touched: false, pause: false, lastCX: void 0, lastCY: void 0, bg: void 0, lastBg: void 0, overlay: true, minimal: true, scale: 1, rotate: 0 };
function K(r2) {
  var i2 = r2.loop, o2 = void 0 === i2 ? 3 : i2, c2 = r2.speed, l2 = r2.easing, s2 = r2.photoClosable, d2 = r2.maskClosable, v2 = void 0 === d2 || d2, f2 = r2.maskOpacity, h2 = void 0 === f2 ? 1 : f2, p2 = r2.pullClosable, x2 = void 0 === p2 || p2, E2 = r2.bannerVisible, X2 = void 0 === E2 || E2, N2 = r2.overlayRender, W2 = r2.toolbarRender, S2 = r2.className, T2 = r2.maskClassName, V2 = r2.photoClassName, R2 = r2.photoWrapClassName, A2 = r2.loadingElement, I2 = r2.brokenElement, H2 = r2.images, L2 = r2.index, F2 = void 0 === L2 ? 0 : L2, D2 = r2.onIndexChange, O2 = r2.visible, B2 = r2.onClose, z2 = r2.afterClose, K2 = r2.portalContainer, U2 = g(q), G2 = U2[0], J2 = U2[1], Q2 = (0, import_react.useState)(0), Z = Q2[0], $ = Q2[1], ee = G2.x, ne = G2.touched, te = G2.pause, re = G2.lastCX, ie = G2.lastCY, oe = G2.bg, ae = void 0 === oe ? h2 : oe, ce = G2.lastBg, ue = G2.overlay, le = G2.minimal, se = G2.scale, de = G2.rotate, ve = G2.onScale, fe = G2.onRotate, he = r2.hasOwnProperty("index"), me = he ? F2 : Z, ge = he ? D2 : $, pe = (0, import_react.useRef)(me), we = H2.length, ye = H2[me], xe = "boolean" == typeof o2 ? o2 : we > o2, Ce = function(e2, r3) {
    var i3 = (0, import_react.useReducer)(function(e3) {
      return !e3;
    }, false)[1], o3 = (0, import_react.useRef)(0), c3 = function(t2, r4) {
      var i4 = (0, import_react.useRef)(t2);
      function c4(e3) {
        i4.current = e3;
      }
      return (0, import_react.useMemo)(function() {
        !function(n2) {
          e2 ? (n2(e2), o3.current = 1) : o3.current = 2;
        }(c4);
      }, [t2]), [i4.current, c4];
    }(e2), u2 = c3[1];
    return [c3[0], o3.current, function() {
      i3(), 2 === o3.current && (u2(false), r3 && r3()), o3.current = 0;
    }];
  }(O2, z2), be = Ce[0], Ee = Ce[1], ke = Ce[2];
  C(function() {
    if (be)
      return J2({ pause: true, x: me * -(innerWidth + 20) }), void (pe.current = me);
    J2(q);
  }, [be]);
  var Pe = m({ close: function(e2) {
    fe && fe(0), J2({ overlay: true, lastBg: ae }), B2(e2);
  }, changeIndex: function(e2, n2) {
    void 0 === n2 && (n2 = false);
    var t2 = xe ? pe.current + (e2 - me) : e2, r3 = we - 1, i3 = y(t2, 0, r3), o3 = xe ? t2 : i3, a2 = innerWidth + 20;
    J2({ touched: false, lastCX: void 0, lastCY: void 0, x: -a2 * o3, pause: n2 }), pe.current = o3, ge && ge(xe ? e2 < 0 ? r3 : e2 > r3 ? 0 : e2 : i3);
  } }), _e = Pe.close, Me = Pe.changeIndex;
  function Ye(e2) {
    return e2 ? _e() : J2({ overlay: !ue });
  }
  function Xe() {
    J2({ x: -(innerWidth + 20) * me, lastCX: void 0, lastCY: void 0, pause: true }), pe.current = me;
  }
  function Ne(e2, n2, t2, r3) {
    "x" === e2 ? function(e3) {
      if (void 0 !== re) {
        var n3 = e3 - re, t3 = n3;
        !xe && (0 === me && n3 > 0 || me === we - 1 && n3 < 0) && (t3 = n3 / 2), J2({ touched: true, lastCX: re, x: -(innerWidth + 20) * pe.current + t3, pause: false });
      } else
        J2({ touched: true, lastCX: e3, x: ee, pause: false });
    }(n2) : "y" === e2 && function(e3, n3) {
      if (void 0 !== ie) {
        var t3 = null === h2 ? null : y(h2, 0.01, h2 - Math.abs(e3 - ie) / 100 / 4);
        J2({ touched: true, lastCY: ie, bg: 1 === n3 ? t3 : h2, minimal: 1 === n3 });
      } else
        J2({ touched: true, lastCY: e3, bg: ae, minimal: true });
    }(t2, r3);
  }
  function We(e2, n2) {
    var t2 = e2 - (null != re ? re : e2), r3 = n2 - (null != ie ? ie : n2), i3 = false;
    if (t2 < -40)
      Me(me + 1);
    else if (t2 > 40)
      Me(me - 1);
    else {
      var o3 = -(innerWidth + 20) * pe.current;
      Math.abs(r3) > 100 && le && x2 && (i3 = true, _e()), J2({ touched: false, x: o3, lastCX: void 0, lastCY: void 0, bg: h2, overlay: !!i3 || ue });
    }
  }
  b("keydown", function(e2) {
    if (O2)
      switch (e2.key) {
        case "ArrowLeft":
          Me(me - 1, true);
          break;
        case "ArrowRight":
          Me(me + 1, true);
          break;
        case "Escape":
          _e();
      }
  });
  var Se = function(e2, n2, t2) {
    return (0, import_react.useMemo)(function() {
      var r3 = e2.length;
      return t2 ? e2.concat(e2).concat(e2).slice(r3 + n2 - 1, r3 + n2 + 2) : e2.slice(Math.max(n2 - 1, 0), Math.min(n2 + 2, r3 + 1));
    }, [e2, n2, t2]);
  }(H2, me, xe);
  if (!be)
    return null;
  var Te = ue && !Ee, Ve = O2 ? ae : ce, Re = ve && fe && { images: H2, index: me, visible: O2, onClose: _e, onIndexChange: Me, overlayVisible: Te, overlay: ye && ye.overlay, scale: se, rotate: de, onScale: ve, onRotate: fe }, Ae = c2 ? c2(Ee) : 400, Ie = l2 ? l2(Ee) : "cubic-bezier(0.25, 0.8, 0.25, 1)", He = c2 ? c2(3) : 600, Le = l2 ? l2(3) : "cubic-bezier(0.25, 0.8, 0.25, 1)";
  return import_react.default.createElement(k, { className: "PhotoView-Portal" + (Te ? "" : " PhotoView-Slider__clean") + (O2 ? "" : " PhotoView-Slider__willClose") + (S2 ? " " + S2 : ""), role: "dialog", onClick: function(e2) {
    return e2.stopPropagation();
  }, container: K2 }, O2 && import_react.default.createElement(Y, null), import_react.default.createElement("div", { className: "PhotoView-Slider__Backdrop" + (T2 ? " " + T2 : "") + (1 === Ee ? " PhotoView-Slider__fadeIn" : 2 === Ee ? " PhotoView-Slider__fadeOut" : ""), style: { background: Ve ? "rgba(0, 0, 0, " + Ve + ")" : void 0, transitionTimingFunction: Ie, transitionDuration: (ne ? 0 : Ae) + "ms", animationDuration: Ae + "ms" }, onAnimationEnd: ke }), X2 && import_react.default.createElement("div", { className: "PhotoView-Slider__BannerWrap" }, import_react.default.createElement("div", { className: "PhotoView-Slider__Counter" }, me + 1, " / ", we), import_react.default.createElement("div", { className: "PhotoView-Slider__BannerRight" }, W2 && Re && W2(Re), import_react.default.createElement(P, { className: "PhotoView-Slider__toolbarIcon", onClick: _e }))), Se.map(function(n2, t2) {
    var r3 = xe || 0 !== me ? pe.current - 1 + t2 : me + t2;
    return import_react.default.createElement(j, { key: xe ? n2.key + "/" + n2.src + "/" + r3 : n2.key, item: n2, speed: Ae, easing: Ie, visible: O2, onReachMove: Ne, onReachUp: We, onPhotoTap: function() {
      return Ye(s2);
    }, onMaskTap: function() {
      return Ye(v2);
    }, wrapClassName: R2, className: V2, style: { left: (innerWidth + 20) * r3 + "px", transform: "translate3d(" + ee + "px, 0px, 0)", transition: ne || te ? void 0 : "transform " + He + "ms " + Le }, loadingElement: A2, brokenElement: I2, onPhotoResize: Xe, isActive: (ye && ye.key) === n2.key, expose: J2 });
  }), !w && X2 && import_react.default.createElement(import_react.default.Fragment, null, (xe || 0 !== me) && import_react.default.createElement("div", { className: "PhotoView-Slider__ArrowLeft", onClick: function() {
    return Me(me - 1, true);
  } }, import_react.default.createElement(_, null)), (xe || me + 1 < we) && import_react.default.createElement("div", { className: "PhotoView-Slider__ArrowRight", onClick: function() {
    return Me(me + 1, true);
  } }, import_react.default.createElement(M, null))), N2 && Re && import_react.default.createElement("div", { className: "PhotoView-Slider__Overlay" }, N2(Re)));
}
var U = ["children", "onIndexChange", "onVisibleChange"];
var G = { images: [], visible: false, index: 0 };
function J(t2) {
  var r2 = t2.children, i2 = t2.onIndexChange, o2 = t2.onVisibleChange, c2 = h(t2, U), u2 = g(G), l2 = u2[0], s2 = u2[1], d2 = (0, import_react.useRef)(0), v2 = l2.images, w2 = l2.visible, y2 = l2.index, x2 = m({ nextId: function() {
    return d2.current += 1;
  }, update: function(e2) {
    var n2 = v2.findIndex(function(n3) {
      return n3.key === e2.key;
    });
    if (n2 > -1) {
      var t3 = v2.slice();
      return t3.splice(n2, 1, e2), void s2({ images: t3 });
    }
    s2(function(n3) {
      return { images: n3.images.concat(e2) };
    });
  }, remove: function(e2) {
    s2(function(n2) {
      var t3 = n2.images.filter(function(n3) {
        return n3.key !== e2;
      });
      return { images: t3, index: Math.min(t3.length - 1, y2) };
    });
  }, show: function(e2) {
    var n2 = v2.findIndex(function(n3) {
      return n3.key === e2;
    });
    s2({ visible: true, index: n2 }), o2 && o2(true, n2, l2);
  } }), C2 = m({ close: function() {
    s2({ visible: false }), o2 && o2(false, y2, l2);
  }, changeIndex: function(e2) {
    s2({ index: e2 }), i2 && i2(e2, l2);
  } }), b2 = (0, import_react.useMemo)(function() {
    return f({}, l2, x2);
  }, [l2, x2]);
  return import_react.default.createElement(p.Provider, { value: b2 }, r2, import_react.default.createElement(K, f({ images: v2, visible: w2, index: y2, onIndexChange: C2.changeIndex, onClose: C2.close }, c2)));
}
var Q = function(e2) {
  var t2, r2, o2 = e2.src, c2 = e2.render, u2 = e2.overlay, v2 = e2.width, h2 = e2.height, g2 = e2.triggers, w2 = void 0 === g2 ? ["onClick"] : g2, y2 = e2.children, x2 = (0, import_react.useContext)(p), C2 = (t2 = function() {
    return x2.nextId();
  }, (r2 = (0, import_react.useRef)({ sign: false, fn: void 0 }).current).sign || (r2.sign = true, r2.fn = t2()), r2.fn), b2 = (0, import_react.useRef)(null);
  (0, import_react.useEffect)(function() {
    return function() {
      x2.remove(C2);
    };
  }, []);
  var E2 = m({ render: function(e3) {
    return c2 && c2(e3);
  }, show: function(e3, n2) {
    x2.show(C2), function(e4, n3) {
      if (y2) {
        var t3 = y2.props[e4];
        t3 && t3(n3);
      }
    }(e3, n2);
  } }), k2 = (0, import_react.useMemo)(function() {
    var e3 = {};
    return w2.forEach(function(n2) {
      e3[n2] = E2.show.bind(null, n2);
    }), e3;
  }, []);
  return (0, import_react.useEffect)(function() {
    x2.update({ key: C2, src: o2, originRef: b2, render: E2.render, overlay: u2, width: v2, height: h2 });
  }, [o2]), y2 ? import_react.Children.only((0, import_react.cloneElement)(y2, f({}, k2, { ref: b2 }))) : null;
};
export {
  J as PhotoProvider,
  K as PhotoSlider,
  Q as PhotoView
};
//# sourceMappingURL=react-photo-view.js.map
